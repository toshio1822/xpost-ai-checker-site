<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>X投稿あんしんチェッカー｜炎上リスクをAIが無料で診断</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="X（旧Twitter）の投稿前チェックツール。AIが炎上リスク・攻撃的表現・誤解されやすい言い回しを自動判定し、安全な文章に書き換えた3種類の修正案も無料で提案します。">

<style>
body {
    font-family: "Noto Sans JP", system-ui, sans-serif;
    margin: 0;
    padding: 20px;
    background: #fafafa;
    line-height: 1.7;
    color: #333;
}

.card {
    background: #fff;
    padding: 22px;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    max-width: 720px;
    margin: auto;
}

/* タイトルバー */
.title-bar {
    background: #ffca28;
    padding: 10px 14px;
    font-size: 1.15rem;
    font-weight: bold;
    color: #333;
    margin: -22px -22px 16px -22px;
    border-radius: 12px 12px 0 0;
}

.subtitle {
    margin-top: 6px;
    font-size: 0.93rem;
    color: #444;
}

.feature-box {
    background: #fff8e1;
    padding: 12px 16px;
    border-left: 4px solid #ffca28;
    border-radius: 8px;
    margin: 14px 0 18px 0;
    font-size: 0.9rem;
}

textarea {
    width: 100%;
    font-size: 1rem;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
    resize: vertical;
    box-sizing: border-box;
}

#inputCounter {
    text-align: right;
    margin-top: 6px;
    font-size: 0.9rem;
    color: #555;
}

button {
    width: 100%;
    padding: 14px;
    margin-top: 24px;
    background: #1d9bf0;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
}
button:hover {
    background: #0d8adf;
}

.notice {
    margin-top: 18px;
    font-size: 0.82rem;
    color: #555;
}

.section-title {
    margin: 28px 0 6px;
    font-weight: bold;
    font-size: 1rem;
    color: #333;
}

/* 選択肢のLiデザイン */
.feature-list li {
    margin-bottom: 6px;
}

#loadingOverlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(2px);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    font-size: 1.4rem;
    color: #1d9bf0;
    font-weight: bold;
}

.loader {
    padding: 20px 30px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    border: 2px solid #1d9bf0;
}
</style>
</head>

<body>
<div id="loadingOverlay">
    <div class="loader">AIチェック中...</div>
</div>

<div class="card">

    <!-- タイトル -->
    <div class="title-bar">
        X投稿あんしんチェッカー｜炎上リスクをAIが無料診断
    </div>

    <!-- 説明（SEO最適化済み） -->
    <p class="subtitle">
        X（旧Twitter）に投稿する前に、文章の炎上リスクをAIが無料でチェックします。<br>
        攻撃的な表現・誤解されやすい言い回し・差別的と受け取られる可能性のある文を自動判定し、より安全で伝わりやすい文章案も生成します。
    </p>

    <!-- 特徴まとめ -->
    <div class="feature-box">
        <strong>AIがチェックするポイント</strong>
        <ul class="feature-list">
            <li>・攻撃的・挑発的に読まれる表現</li>
            <li>・誤解されやすい曖昧な言い回し</li>
            <li>・属性でひとくくりにする不適切な表現</li>
            <li>・炎上につながる“強すぎる主張”</li>
        </ul>
        さらに、文章の修正案を <strong>「マイルド / ビジネス / ユーモア」</strong> の3種類で提案します。
    </div>

    <form id="checkForm" action="ai_check.php" method="POST">
        <label for="postText"><b>チェックしたい文章を入力してください（最大140文字）</b></label><br>
        <textarea
            name="text"
            id="postText"
            rows="6"
            placeholder="例：このまま続くなら直接話したほうがいいかもしれない。"
        ></textarea>

        <div id="inputCounter">0 / 140文字</div>

        <button type="submit">AIでチェックする</button>

        <!-- 注意書き -->
        <div class="notice">
            ※ 個人情報（住所・電話番号・本名など）は入力しないでください。<br>
            ※ AIの判断は100%ではありません。最終的な投稿内容はご自身でご確認ください。<br>
            ※ 当サービスは OpenAI API を利用しています。<br>
            ※ 送信された文章は判定処理にのみ使用し、保存は行いません。
        </div>

        <!-- 広告ラベル -->
        <div style="margin-top:24px; font-size:0.8rem; color:#888;">
            【広告】
        </div>

        <!-- AdSense -->
        <div style="margin-top:4px;">

            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8182034043692523"
                 crossorigin="anonymous"></script>

            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-8182034043692523"
                data-ad-slot="2783524124"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>

            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>

        </div>

    </form>

    <!-- 下部に「証拠化サービス」案内を追加（自然な導線） -->
    <div class="section-title">もし、すでにトラブルが起きている場合は…</div>
    <p style="font-size:0.9rem;">
        投稿前の安全チェックだけでなく、誹謗中傷・虚偽通報・攻撃的引用などが発生したあとに  
        <strong>「証拠として残す」</strong> ことも非常に重要です。
        <br><br>
        XPost AI Checker では、問題投稿をAIが分類し、PDF/A準拠の証拠レポートに自動整理できます。
        <br>
        → <a href="https://xpostaichecker.jp/" target="_blank">証拠化サービスを見る</a>
    </p>

</div>

<script>
const textarea = document.getElementById('postText');
const counter  = document.getElementById('inputCounter');
const maxLen   = 140;
const form     = document.getElementById('checkForm');
const overlay  = document.getElementById('loadingOverlay');

/**
 * X（Twitter）っぽい文字数カウント
 */
function countCharacters(value) {
    const normalized = value.replace(/\r\n/g, "\n");
    let weight = 0;

    for (const ch of normalized) {
        const code = ch.codePointAt(0);
        if (code <= 0xFF) {
            weight += 0.5;
        } else {
            weight += 1;
        }
    }
    return Math.ceil(weight);
}

function updateCounter() {
    const len = countCharacters(textarea.value);
    counter.textContent = `${len} / ${maxLen}文字`;
    counter.style.color = len > maxLen ? "red" : "#555";
}

textarea.addEventListener('input', updateCounter);
updateCounter();

form.addEventListener('submit', function (e) {
    const len = countCharacters(textarea.value);

    if (len === 0) {
        e.preventDefault();
        alert("文章が入力されていません。");
        return;
    }
    if (len > maxLen) {
        e.preventDefault();
        alert(`140文字を超えています（現在 ${len} 文字）。\n短くしてから再度チェックしてください。`);
        return;
    }

    overlay.style.display = "flex";
});
</script>

</body>
</html>

